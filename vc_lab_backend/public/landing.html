<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="landing.css">
    <link rel="stylesheet" href="BG.css">
</head>
<body id="landing-page">
    <header id="header">
        <h1>Dashboard</h1>
        <nav>
            <ul class="navbar">
                <li><a href="faculty-ongoing-projects.html">Ongoing Projects</a></li>
                <li><a href="faculty-completed-projects.html">Completed Projects</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>
    <main class="main-container">
        <h1 id="welcome-message">
            Welcome, <span id="username">Admin!</span>
        </h1>
        <div class="date-filter">
            <label for="start-date">Start Date: </label>
            <input type="date" id="start-date">
            <label for="end-date">End Date: </label>
            <input type="date" id="end-date">
            <button id="filter-button">Filter</button>
        </div>
        <div class="table-container">
            <h2>Contact Us Entries</h2>
            <table id="contact-us-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Message</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Entries will be dynamically inserted here -->
                </tbody>
            </table>
            <div class="no-data" id="contact-us-no-data">No contact entries available.</div>
        </div>

        <div class="table-container">
            <h2>Training Program Registrations</h2>
            <table id="training-program-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Program</th>
                        <th>Payment Link</th>
                        <th>Comments</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Entries will be dynamically inserted here -->
                </tbody>
            </table>
            <div class="no-data" id="training-program-no-data">No training registrations available.</div>
        </div>

        <div class="table-container">
            <h2>Internship Registrations</h2>
            <table id="internship-registration-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>College</th>
                        <th>Resume Link</th>
                        <th>Additional Information</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Entries will be dynamically inserted here -->
                </tbody>
            </table>
            <div class="no-data" id="internship-registration-no-data">No internship registrations available.</div>
        </div>

        <div class="table-container">
            <h2>Join Us Applications</h2>
            <table id="join-us-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Specialization</th>
                        <th>Resume Link</th>
                        <th>LinkedIn</th>
                        <th>Scopus</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Entries will be dynamically inserted here -->
                </tbody>
            </table>
            <div class="no-data" id="join-us-no-data">No join us applications available.</div>
        </div>

        <div class="table-container">
            <h2>Dataset Requests</h2>
            <table id="dataset-request-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Project</th>
                        <th>Description</th>
                        <th>Dataset</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Entries will be dynamically inserted here -->
                </tbody>
            </table>
            <div class="no-data" id="dataset-request-no-data">No dataset requests available.</div>
        </div>

        <div class="mail-section">
            <h2>Send an Email</h2>
            <form id="mailForm">
                <label for="to">To:</label>
                <input type="email" id="to" name="to" required>
                <label for="subject">Subject:</label>
                <input type="text" id="subject" name="subject" required>
                <label for="message">Message:</label>
                <textarea id="message" name="message" required></textarea>
                <button type="submit">Send</button>
            </form>
            <div id="status"></div>
        </div>
    
        <script>
            document.getElementById('mailForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const to = document.getElementById('to').value;
                const subject = document.getElementById('subject').value;
                const message = document.getElementById('message').value;
    
                const response = await fetch('/send-mail', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ to, subject, message }),
                });
    
                const statusDiv = document.getElementById('status');
                if (response.ok) {
                    statusDiv.textContent = 'Email sent successfully!';
                    statusDiv.style.color = 'green';
                } else {
                    statusDiv.textContent = 'Failed to send email.';
                    statusDiv.style.color = 'red';
                }
            });
        </script>
    </main>
    <footer id="footer">
        <p>&copy; 2024 VC. All rights reserved.</p>
    </footer>
    <script src="landing.js"></script>
</body>
</html>
